<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Frame-It</title>
    <link href="./assets/css/style.css" rel="stylesheet">
</head>
<body draggable="true">
    <div class="toolbar">
        <button type="button" id="upload" class="icon button">
            <span class="visuallyHidden">Select a file</span>
        </button>
        <button type="button" id="copy" class="icon button">
            <span class="visuallyHidden">Copy</span>
        </button>
        <button type="button" id="download" class="icon button">
            <span class="visuallyHidden">Download</span>
        </button>
        <button type="button" id="clear" class="icon button">
            <span class="visuallyHidden">Clear</span>
        </button>
    </div>
    <canvas id="canvas" width="0" height="0"></canvas>
    <input type="file" id="file" accept="image/*, image/avif" class="visuallyHidden" tabindex="-1">
	<script type="module">
		import { App } from "./assets/js/app.js"
		const app = new App(
			document.querySelector('#canvas'),
			document.querySelector('#file')
		)

		document.querySelector('#clear').addEventListener('click', () => { app.clearCanvas() })
		document.querySelector('#upload').addEventListener('click', () => { app.triggerFilePicker() })
		document.querySelector('#copy').addEventListener('click', () => { app.copyImageToClipboard() })
		document.addEventListener('copy', (event) => {
            event.preventDefault()
            app.copyImageToClipboard()
        })
        document.addEventListener('paste', (event) => {
            if (event.clipboardData.files.length > 0) {
				app.setImageFromFile(event.clipboardData.files[0])
            } else {
				app.setDefaultImage()
			}
        })
        document.querySelector('#download').addEventListener('click', () => { app.download() })
	</script>
</body>
</html>
